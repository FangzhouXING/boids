<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Boids Simulation</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <main>
      <header>
        <h1>Boids Simulation</h1>
        <p>30000 boids, fixed count.</p>
      </header>

      <section class="sim-layout">
        <section class="canvas-wrap">
          <canvas id="boidCanvas" width="960" height="560" aria-label="boids simulation canvas"></canvas>
        </section>

        <aside class="controls" aria-label="Simulation controls">
          <section class="control-section" aria-label="Boid motion controls">
            <h2 class="control-title">Boids</h2>
            <p class="fixed-count">Count: <strong>30000</strong> (fixed)</p>
            <label class="control-group" for="turnAccelRange">
              <span>Turn Accel: <strong id="turnAccelValue">340</strong> deg/sÂ²</span>
              <input id="turnAccelRange" type="range" min="120" max="2400" step="20" value="340" />
            </label>
            <label class="control-group" for="minSpeedRange">
              <span>Min Speed: <strong id="minSpeedValue">0.55</strong></span>
              <input id="minSpeedRange" type="range" min="0" max="1.6" step="0.05" value="0.55" />
            </label>
            <button id="viewToggleButton" class="secondary" type="button" aria-pressed="false">View: Arrows</button>
          </section>

          <section class="control-section" aria-label="Trail source controls">
            <h2 class="control-title">Trail Sources</h2>
            <p class="fixed-count">Nodes: <strong>6</strong> (drifting)</p>
            <label class="control-group" for="predatorAttentionRange">
              <span>Source Strength: <strong id="predatorAttentionValue">0.08</strong></span>
              <input id="predatorAttentionRange" type="range" min="0.00" max="2.00" step="0.02" value="0.08" />
            </label>
          </section>

          <section class="control-section" aria-label="Heatmap controls">
            <h2 class="control-title">Heatmap</h2>
            <label class="control-group" for="heatmapSpacingRange">
              <span>Dot Spacing: <strong id="heatmapSpacingValue">8.0</strong> px</span>
              <input id="heatmapSpacingRange" type="range" min="3" max="14" step="0.5" value="8.0" />
            </label>
            <label class="control-group" for="heatmapDotRadiusRange">
              <span>Dot Size: <strong id="heatmapDotRadiusValue">3.5</strong> px</span>
              <input id="heatmapDotRadiusRange" type="range" min="1.25" max="8" step="0.25" value="3.5" />
            </label>
            <label class="control-group" for="heatmapDiffuseRange">
              <span>Diffuse Radius: <strong id="heatmapDiffuseValue">22</strong> px</span>
              <input id="heatmapDiffuseRange" type="range" min="8" max="40" step="1" value="22" />
            </label>
            <label class="control-group" for="heatmapSamplesRange">
              <span>Sample Budget: <strong id="heatmapSamplesValue">320</strong></span>
              <input id="heatmapSamplesRange" type="range" min="96" max="768" step="32" value="320" />
            </label>
            <label class="control-group" for="heatmapTrendGainRange">
              <span>Trend Gain: <strong id="heatmapTrendGainValue">4.2</strong></span>
              <input id="heatmapTrendGainRange" type="range" min="1.0" max="9.0" step="0.1" value="4.2" />
            </label>
            <label class="control-group" for="heatmapTrendDeadbandRange">
              <span>Trend Deadband: <strong id="heatmapTrendDeadbandValue">0.045</strong></span>
              <input id="heatmapTrendDeadbandRange" type="range" min="0.005" max="0.18" step="0.005" value="0.045" />
            </label>
          </section>

          <section class="control-section" aria-label="Physarum controls">
            <h2 class="control-title">Physarum</h2>
            <label class="control-group" for="pherTrailWeightRange">
              <span>Trail Deposit: <strong id="pherTrailWeightValue">0.65</strong></span>
              <input id="pherTrailWeightRange" type="range" min="0.10" max="4.00" step="0.05" value="0.65" />
            </label>
            <label class="control-group" for="pherFearWeightRange">
              <span>Sensor Offset: <strong id="pherFearWeightValue">10.5</strong></span>
              <input id="pherFearWeightRange" type="range" min="2.0" max="24.0" step="0.5" value="10.5" />
            </label>
            <label class="control-group" for="pherDiffusionRange">
              <span>Trail Diffusion: <strong id="pherDiffusionValue">0.36</strong></span>
              <input id="pherDiffusionRange" type="range" min="0.02" max="0.95" step="0.01" value="0.36" />
            </label>
            <label class="control-group" for="pherDecayRange">
              <span>Trail Decay: <strong id="pherDecayValue">0.050</strong></span>
              <input id="pherDecayRange" type="range" min="0.001" max="0.200" step="0.001" value="0.050" />
            </label>
            <label class="control-group" for="panicBoostRange">
              <span>Turn Rate Limit: <strong id="panicBoostValue">170</strong> deg/s</span>
              <input id="panicBoostRange" type="range" min="40" max="600" step="5" value="170" />
            </label>
          </section>

          <section class="control-section" aria-label="Ecology controls">
            <h2 class="control-title">Ecology</h2>
            <label class="control-group" for="metabolismRange">
              <span>Metabolism: <strong id="metabolismValue">1.00</strong></span>
              <input id="metabolismRange" type="range" min="0.4" max="2.2" step="0.05" value="1.00" />
            </label>
            <label class="control-group" for="boidSprintBoostRange">
              <span>Boid Sprint: <strong id="boidSprintBoostValue">0.90</strong></span>
              <input id="boidSprintBoostRange" type="range" min="0.1" max="2.2" step="0.05" value="0.90" />
            </label>
            <label class="control-group" for="predatorSprintBoostRange">
              <span>Predator Sprint: <strong id="predatorSprintBoostValue">0.20</strong></span>
              <input id="predatorSprintBoostRange" type="range" min="0.1" max="2.6" step="0.05" value="0.20" />
            </label>
            <label class="control-group" for="confusionStrengthRange">
              <span>Confusion Effect: <strong id="confusionStrengthValue">0.62</strong></span>
              <input id="confusionStrengthRange" type="range" min="0" max="1.5" step="0.02" value="0.62" />
            </label>
            <label class="control-group" for="mutationRateRange">
              <span>Mutation Rate: <strong id="mutationRateValue">0.07</strong></span>
              <input id="mutationRateRange" type="range" min="0.01" max="0.22" step="0.005" value="0.07" />
            </label>
          </section>

          <section class="control-section" aria-label="Performance metrics">
            <h2 class="control-title">Performance</h2>
            <p class="metric-line">FPS: <strong id="fpsValue">0</strong></p>
            <p class="metric-line">Frame CPU: <strong id="frameCpuValue">0.00</strong> ms</p>
            <p class="metric-line">Sim CPU: <strong id="simCpuValue">0.00</strong> ms</p>
            <p class="metric-line">Heatmap CPU: <strong id="heatmapCpuValue">0.00</strong> ms</p>
            <p class="metric-line">Render CPU: <strong id="renderCpuValue">0.00</strong> ms</p>
          </section>

          <button id="restartButton" type="button">Reseed</button>
        </aside>
      </section>
    </main>

    <script src="app.js"></script>
  </body>
</html>
